<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>H2MDK 1.5-3W Fuel Cell Inventor Kit</title><link rel="stylesheet" href="gtb_docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="H2MDK 1.5-3W Fuel Cell Inventor Kit"><div class="titlepage"><div><div><h2 class="title"><a name="id2929790"></a>H2MDK 1.5-3W Fuel Cell Inventor Kit</h2></div><div><h3 class="subtitle"><i>User Guide</i></h3></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="2"><b>Revision History</b></th></tr><tr><td align="left">Revision 0.5</td><td align="left">16 April 2012</td></tr><tr><td align="left" colspan="2">First draft</td></tr><tr><td align="left">Revision 0.6</td><td align="left">24 August 2012</td></tr><tr><td align="left" colspan="2">Changes made for hardware revision v1.2</td></tr></table></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#overview">Document Overview</a></span></dt><dt><span class="sect1"><a href="#features">Features</a></span></dt><dt><span class="sect1"><a href="#included">What is included</a></span></dt><dt><span class="sect1"><a href="#included%20in%20the%20extender%20module">Included in the power extender module</a></span></dt><dt><span class="sect1"><a href="#what%20is%20needed">What you will need</a></span></dt><dt><span class="sect1"><a href="#setup%20instructions%20for%20single%20stack">Setup instructions for single stack</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id2930136">Connect H2 regulator and purge valve</a></span></dt><dt><span class="sect2"><a href="#id2932284">Solder wires to fuel cell stack</a></span></dt><dt><span class="sect2"><a href="#id2932364">Electrical connections to Arduino shield</a></span></dt><dt><span class="sect2"><a href="#id2941620">Prepare Arduino and fuel cell control shield</a></span></dt><dt><span class="sect2"><a href="#id2941822">Connect hydroSTIK and load</a></span></dt></dl></dd><dt><span class="sect1"><a href="#setup%20instructions%20for%202%20stacks">Setup instructions using power extender module (2 stacks)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id2930626">Connect H2 regulator and purge valve</a></span></dt><dt><span class="sect2"><a href="#id2930720">Solder wires to fuel cell stack</a></span></dt></dl></dd><dt><span class="sect1"><a href="#operation">Operation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#statusleds">Status LEDs</a></span></dt><dt><span class="sect2"><a href="#id2930848">Purge</a></span></dt><dt><span class="sect2"><a href="#id2930860">Waste water</a></span></dt><dt><span class="sect2"><a href="#id2930876">Output power</a></span></dt><dt><span class="sect2"><a href="#id2930890">Overload protection</a></span></dt><dt><span class="sect2"><a href="#id2930904">Fuel cell maintenance and use</a></span></dt><dt><span class="sect2"><a href="#id2930923">Software downloads</a></span></dt><dt><span class="sect2"><a href="#id2986577">Monitoring fuel cell status</a></span></dt></dl></dd><dt><span class="sect1"><a href="#poweroutput">Power output &amp; conditioning</a></span></dt><dt><span class="sect1"><a href="#software%20description">Software description</a></span></dt><dd><dl><dt><span class="sect2"><a href="#softwaredefines">Setup and defines</a></span></dt><dt><span class="sect2"><a href="#availablefunctions">Available Functions</a></span></dt></dl></dd><dt><span class="sect1"><a href="#storage">Storage</a></span></dt><dt><span class="sect1"><a href="#reconditioning">Reconditioning</a></span></dt><dt><span class="sect1"><a href="#supply">Hydrogen supply</a></span></dt><dt><span class="sect1"><a href="#safety">Safety</a></span></dt><dt><span class="sect1"><a href="#faq">FAQ</a></span></dt><dt><span class="sect1"><a href="#support">Support</a></span></dt><dt><span class="sect1"><a href="#license">License</a></span></dt></dl></div><div class="sect1" title="Document Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="overview"></a>Document Overview</h2></div></div></div><p>The H2MDK3 kit enables the user to easily design and build fuel cell systems using one or two Horizon 1.5 PEM fuel cell stacks to deliver 1.5W or 3W respectively.</p><p>An open source platform supported by an online developer forum encourages rapid customisation of systems, control and user interface for a wide range of applications from model trains, planes and automobiles, to remote monitoring systems. 
</p><p>This manual doesn't attempt to replace the manual that comes with the fuel cell stack. Read the fuel cell manual to get an understanding of how to properly treat the stack.</p><p>This manual covers shields v1.2 or above. If you have a shield with a lower version number please contact us directly at <a class="ulink" href="mailto:support@arcolaenergy.com" target="_top">support@arcolaenergy.com</a></p></div><div class="sect1" title="Features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="features"></a>Features</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Control system for Horizon fuel cell stack</li><li class="listitem">Refillable metal hydride hydrogen storage with pressure regulators</li><li class="listitem">Complete component kit to build and create your own hydrogen fuel cell power plant</li><li class="listitem">Development board "shield" for popular Arduino platform with stack control software</li><li class="listitem">Monitoring and data-logging via USB (voltage &amp; current)</li><li class="listitem">Open source hardware and software</li><li class="listitem">Regulated 5V output</li><li class="listitem">Expansion option to add remote control </li><li class="listitem">Expansion option to add LCD (Liquid Crystal Display)</li></ul></div></div><div class="sect1" title="What is included"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="included"></a>What is included</h2></div></div></div><div class="figure"><a name="id2976711"></a><p class="title"><b>Figure 1. What is included</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/included.jpg" width="100%" alt="What is included"></td></tr></table></div></div></div><br class="figure-break"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">1.5W stack</li><li class="listitem">H2MDK Arduino Fuel Cell Shield</li><li class="listitem">HydroSTIK hydrogen storage. Pre-filled where delivery method allows</li><li class="listitem">Pressure Regulator</li><li class="listitem">Silicon tubing (30cm)</li><li class="listitem">1 x Tube Clip</li><li class="listitem">1 x Purge valve</li><li class="listitem">Red/black electrical cable </li></ol></div></div><div class="sect1" title="Included in the power extender module"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="included%20in%20the%20extender%20module"></a>Included in the power extender module</h2></div></div></div><div class="figure"><a name="id2982674"></a><p class="title"><b>Figure 2. What is included in the extender module</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/expansionmodule.jpg" width="100%" alt="What is included in the extender module"></td></tr></table></div></div></div><br class="figure-break"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">1.5W stack</li><li class="listitem">2 x tee splitter</li><li class="listitem">Silicon tubing (30cm)</li></ol></div></div><div class="sect1" title="What you will need"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="what%20is%20needed"></a>What you will need</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Arduino Uno</li><li class="listitem">USB Cable</li><li class="listitem">Soldering iron</li></ul></div></div><div class="sect1" title="Setup instructions for single stack"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup%20instructions%20for%20single%20stack"></a>Setup instructions for single stack</h2></div></div></div><div class="sect2" title="Connect H2 regulator and purge valve"><div class="titlepage"><div><div><h3 class="title"><a name="id2930136"></a>Connect H2 regulator and purge valve</h3></div></div></div><div class="figure"><a name="id2930142"></a><p class="title"><b>Figure 3. Hydrogen plumbing</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/plumbing.jpg" width="100%" alt="Hydrogen plumbing"></td></tr></table></div></div></div><br class="figure-break"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Cut a short length of silicone tube (approx 3cm)</li><li class="listitem">Push one end of the short length onto the white nozzle of the purge valve</li><li class="listitem">Push the other end of this tube onto the outlet nozzle of the fuel cell stack</li><li class="listitem">Cut a longer piece of silicone (about 8cm)</li><li class="listitem">Thread the longer length of silicone through the plastic tube clip. This clip will be used later to open or close the flow of hydrogen whilst the regulator and HydroSTIK are connected</li><li class="listitem">Unscrew the nut from the regulator and thread one end of the tube through the nut before pushing the tube onto the regulator and tightening the nut over the tube (there is no need to use a spanner - finger-tight is sufficient)</li><li class="listitem">Connect the other end to the fuel cell stack inlet by pushing the tube over the inlet nozzle</li></ol></div></div><div class="sect2" title="Solder wires to fuel cell stack"><div class="titlepage"><div><div><h3 class="title"><a name="id2932284"></a>Solder wires to fuel cell stack</h3></div></div></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3>
Fuel cell stacks must be connected with correct polarity otherwise components will be damaged. 
Please check that the red and black wires are soldered to the correct terminals as outlined below.
</div><div class="figure"><a name="id2932297"></a><p class="title"><b>Figure 4. Solder wires to fuel cell</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="60%"><tr><td><img src="pics/html/3w/wiringfuelcellsingle.jpg" width="100%" alt="Solder wires to fuel cell"></td></tr></table></div></div></div><br class="figure-break"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Cut the wires into 15cm lengths: 1 x red. 1 x black</li><li class="listitem">Strip approx 5mm of insulation from each end of the loose wires</li><li class="listitem">Orientate the stack so that the nozzle is at the top as you look at the side with the solder tags</li><li class="listitem">Solder one red wire to the left hand solder-tag terminal of the fuel cell stack</li><li class="listitem">Solder one black wire to the right hand solder-tag terminal of the fuel cell stack</li></ol></div></div><div class="sect2" title="Electrical connections to Arduino shield"><div class="titlepage"><div><div><h3 class="title"><a name="id2932364"></a>Electrical connections to Arduino shield</h3></div></div></div><div class="figure"><a name="id2932369"></a><p class="title"><b>Figure 5. Electrical connections</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/wiring.jpg" width="100%" alt="Electrical connections"></td></tr></table></div></div></div><br class="figure-break"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Take the black wire from the fuel cell stack and connect to the terminal on the Arduino shield labelled  GND</li><li class="listitem">Take the red wire from the fuel cell stack and connect to the terminal on the Arduino shield labelled FC IN</li><li class="listitem">Connect one wire (doesn't matter which of the two) from the purge valve to the terminal on the Arduino shield labelled PURGE</li><li class="listitem">Connect the other wire from the purge valve to the terminal on the Arduino shield labelled PURGE</li></ol></div></div><div class="sect2" title="Prepare Arduino and fuel cell control shield"><div class="titlepage"><div><div><h3 class="title"><a name="id2941620"></a>Prepare Arduino and fuel cell control shield</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If you do not already have the Arduino environment and drivers installed on your computer, <a class="ulink" href="http://arduino.cc/en/Guide/HomePage" target="_top">follow these instructions</a>, relating to your operating system</li><li class="listitem">Plug the Fuel Cell Shield into the Arduino Uno taking care that all the pins on the underside of the shield slot into the holes in the Arduino Uno stackable header</li><li class="listitem">Connect your Arduino to your computer using a standard USB cable</li><li class="listitem">Download the <a class="ulink" href="http://www.arcolaenergy.com/h2mdk" target="_top">latest version of the H2MDK Arduino library</a></li><li class="listitem">Unzip the library in the libraries directory in your sketchbook folder</li><li class="listitem">Launch the Arduino Environment software on your computer</li><li class="listitem">In the "Tools" menu, check that you have correct Board selected (Arduino Uno) and correct Serial Port (see Arduino Help if you are uncertain, and test with example sketches  from the Arduino Environment "File" menu)</li><li class="listitem">Open the example file in the Arduino Environment: "File", "Examples", "H2MDK", "h2mdk"</li><li class="listitem">Check the definitions for the stack and shield are set correctly. See <a class="link" href="#softwaredefines" title="Setup and defines">the section on software defines</a> for more information</li><li class="listitem">Click the "Upload" button to upload the software to the Arduino</li><li class="listitem">Open the Serial Monitor from the Tools menu in the Arduino Environment</li><li class="listitem">Check that the baud rate (bottom-right of the window) is set at 9600.  You should see text appear in the Serial Monitor window to indicate that the software is running. You should also see activity on the <a class="link" href="#statusleds" title="Status LEDs">LEDs</a></li></ol></div></div><div class="sect2" title="Connect hydroSTIK and load"><div class="titlepage"><div><div><h3 class="title"><a name="id2941822"></a>Connect hydroSTIK and load</h3></div></div></div><div class="figure"><a name="id2941826"></a><p class="title"><b>Figure 6. Connect hydroSTIK and load</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/fullsetup.jpg" width="100%" alt="Connect hydroSTIK and load"></td></tr></table></div></div></div><br class="figure-break"><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3>
The fuel cell stack requires unobstructed airflow to all vents in order to function as the oxygen used in the electrochemical reaction is drawn through these vents. Obstructed air supply will reduce the performance and lifetime of your stacks.
</div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Ensure the plastic clip on the tube between the regulator and the inlet valve is closed</li><li class="listitem">Screw a HydroSTIK into the regulator</li><li class="listitem">Ensure stack is mounted or positioned so that the vents on both sides are open to the air</li><li class="listitem">Open the clip on the tube to allow hydrogen to flow into the fuel cell stack. It is normal for the HydroSTIK to get cold during operation - how cold will depend on factors including current drawn and ambient temperature</li><li class="listitem">You can now connect the negative wire of your electrical load to the terminal marked GND and the positive wire to the terminal marked FC OUT</li><li class="listitem">When you wish to turn off the system, first disconnect your load from the FC OUT terminal</li><li class="listitem">Close the clip on the hydrogen supply tube to stop the flow of Hydrogen</li></ol></div><p>Care should be taken not to overload the stack. Ensure that the maximum current drawn by your equipment cannot exceed that which the stack can supply (1.5 or 3W). For more information on stack performance, including IV characteristics consult the <a class="ulink" href="http://www.horizonfuelcell.com/fuel_cell_stacks.htm" target="_top">Horizon Fuel Cell H-Series User Guide</a></p></div></div><div class="sect1" title="Setup instructions using power extender module (2 stacks)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup%20instructions%20for%202%20stacks"></a>Setup instructions using power extender module (2 stacks)</h2></div></div></div><p>The instructions for using 2 stacks differ only in the hydrogen and electrical connections. These are detailed below. Follow all the other instructions detailed in the single stack setup.</p><div class="sect2" title="Connect H2 regulator and purge valve"><div class="titlepage"><div><div><h3 class="title"><a name="id2930626"></a>Connect H2 regulator and purge valve</h3></div></div></div><div class="figure"><a name="id2930631"></a><p class="title"><b>Figure 7. Hydrogen Plumbing for 2 stacks</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/doubleplumbing.jpg" width="100%" alt="Hydrogen Plumbing for 2 stacks"></td></tr></table></div></div></div><br class="figure-break"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Cut a short length of silicone tube (approx 3cm)</li><li class="listitem">Push one end of the short length onto the white nozzle of the purge valve</li><li class="listitem">Push the other end of this tube onto tee splitter</li><li class="listitem">Cut two 8cm pieces of silicone, connect one to each of the other ends of the first tee splitter</li><li class="listitem">Connect each free end from the tee piece to the outlet nozzle of each fuel cell stack</li><li class="listitem">Cut another two 8cm pieces of silicone, connect one to each of the other ends of the second tee splitter</li><li class="listitem">Connect each free end from the tee piece to the inlet nozzle of each fuel cell stack</li><li class="listitem">Cut another 8cm piece of silicone and thread through the plastic tube clip</li><li class="listitem">Unscrew the nut from the regulator and thread one end of the tube through the nut before pushing the tube onto the regulator and tightening the nut over the tube (there is no need to use a spanner - finger-tight is sufficient)</li></ol></div></div><div class="sect2" title="Solder wires to fuel cell stack"><div class="titlepage"><div><div><h3 class="title"><a name="id2930720"></a>Solder wires to fuel cell stack</h3></div></div></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3>
Fuel cell stacks must be connected with correct polarity otherwise components will be damaged. 
Please check that the red and black wires are soldered to the correct terminals as outlined below.
</div><div class="figure"><a name="id2930732"></a><p class="title"><b>Figure 8. Solder wires to 2 stacks</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/wiringfuelcelldouble.jpg" width="100%" alt="Solder wires to 2 stacks"></td></tr></table></div></div></div><br class="figure-break"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Cut the wires into two 15cm lengths: 1 x red. 1 x black, and 1 x black 5cm length</li><li class="listitem">Strip approx 5mm of insulation from each end of the loose wires</li><li class="listitem">Orientate the stacks so that the nozzle is at the top as you look at the side with the solder tags</li><li class="listitem">Solder 15cm red wire to the left hand solder-tag terminal of the left hand fuel cell stack</li><li class="listitem">Solder 15cm black wire to the right hand solder-tag terminal of the right hand fuel cell stack</li><li class="listitem">Solder 5cm black wire from the right hand solder-tag of the left fuel cell to the left hand solder-tag of the right fuel cell</li></ol></div></div></div><div class="sect1" title="Operation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="operation"></a>Operation</h2></div></div></div><div class="sect2" title="Status LEDs"><div class="titlepage"><div><div><h3 class="title"><a name="statusleds"></a>Status LEDs</h3></div></div></div><p>There are 3 LEDs:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">After reset, the status LED flashes twice in 200ms, and then every 400ms until the capacitors have charged. When the system is operating normally the LED will flash every second</li><li class="listitem">the short LED shows when the fuel cell is shorted. This maintains proper temperature and humidity inside the stack</li><li class="listitem">the purge LED shows when the purge valve operates</li></ul></div></div><div class="sect2" title="Purge"><div class="titlepage"><div><div><h3 class="title"><a name="id2930848"></a>Purge</h3></div></div></div><p>Every few minutes, you will hear a short "hiss" as the purge valves open. This purging allows fresh hydrogen to flow in to the stack.</p></div><div class="sect2" title="Waste water"><div class="titlepage"><div><div><h3 class="title"><a name="id2930860"></a>Waste water</h3></div></div></div><p>The by-product of the electrochemical reaction is a small amount of water. This is released through the vents on both sides of the stack. The larger the electrical load, the more water will be produced. This small amount of water usually evaporates, however occasionally under high load, droplets are formed therefore the stack should not be placed in a moisture sensitive area.</p></div><div class="sect2" title="Output power"><div class="titlepage"><div><div><h3 class="title"><a name="id2930876"></a>Output power</h3></div></div></div><p>
With the system running without a computer (standalone), the Arduino will be drawing about 0.25W, so with a single stack expected output power will be 1.25W. With a 3W system, output power will be 2.75W.
</p></div><div class="sect2" title="Overload protection"><div class="titlepage"><div><div><h3 class="title"><a name="id2930890"></a>Overload protection</h3></div></div></div><p>
If the stack voltage drops too low due to being overloaded or externally short-circuited, the stack control shield will disconnect the load. If you have a terminal window open, a warning message will be displayed.
</p></div><div class="sect2" title="Fuel cell maintenance and use"><div class="titlepage"><div><div><h3 class="title"><a name="id2930904"></a>Fuel cell maintenance and use</h3></div></div></div><p>Please check the <a class="ulink" href="http://www.horizonfuelcell.com/fuel_cell_stacks.htm" target="_top">Horizon Fuel Cell H-Series User Guide</a> for further instructions on use and maintenance of your Fuel Cell stack to prevent degradation due to mishandling. </p></div><div class="sect2" title="Software downloads"><div class="titlepage"><div><div><h3 class="title"><a name="id2930923"></a>Software downloads</h3></div></div></div><p>Latest fuel cell stack control software is available from the <a class="ulink" href="http://www.github.com/arcolaenergy/" target="_top">GIT repository</a>
The software is fully documented inline, including instructions for use.</p></div><div class="sect2" title="Monitoring fuel cell status"><div class="titlepage"><div><div><h3 class="title"><a name="id2986577"></a>Monitoring fuel cell status</h3></div></div></div><p>The fuel cell status (stack voltage and current) is displayed by default in the Arduino Serial Monitor. For further information, please see software documentation.</p></div></div><div class="sect1" title="Power output &amp; conditioning"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="poweroutput"></a>Power output &amp; conditioning</h2></div></div></div><p>The 1.5/3W H2MDK Fuel Cell Shield controls the fuel cell, and regulates the output to 5V. The super capacitors help to keep the voltage constant even when shorting the stack or purging the waste gas from the stack.
</p><p>The plot below show the characteristics of the H1.5 as supplied off-the-shelf by Horizon.</p><div class="figure"><a name="id2986610"></a><p class="title"><b>Figure 9. 1.5W IV curve</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="pics/html/3w/1.5Wivcurve.jpg" width="100%" alt="1.5W IV curve"></td></tr></table></div></div></div><br class="figure-break"></div><div class="sect1" title="Software description"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="software%20description"></a>Software description</h2></div></div></div><div class="sect2" title="Setup and defines"><div class="titlepage"><div><div><h3 class="title"><a name="softwaredefines"></a>Setup and defines</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The <code class="code">_stacksize</code> setting defines the size of the fuel cell stack and can be one of <code class="code">V1_5W, V3W, V12W V30W</code></li><li class="listitem">The <code class="code">_shield</code> setting defines the version of the shield. This is printed on the reverse of your shield and currently can be one of <code class="code">V1_0, V1_2, V1_3</code></li></ul></div></div><div class="sect2" title="Available Functions"><div class="titlepage"><div><div><h3 class="title"><a name="availablefunctions"></a>Available Functions</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">void poll()</code> This function must be called at least every 100ms to keep the stack running. It takes care of the timings of the shorting, purging and measurement of the stack.</li><li class="listitem"><code class="code">void status()</code> prints a short voltage and current measurement to the hardware serial port</li><li class="listitem"><code class="code">float getVoltage()</code>returns the stack voltage as a floating point number</li><li class="listitem"><code class="code">float getCurrent()</code>returns the stack current as a floating point number</li><li class="listitem"><code class="code">void start()</code>configures the code and blocks until the capacitors are charged</li><li class="listitem"><code class="code">void overrideTimings( unsigned int shortCircuitInterval, unsigned int shortTime, unsigned long purgeInterval, unsigned in purgeTime)</code>This can be used to change the timings of the stack shorting and purging. All values should be in milliseconds</li></ul></div></div></div><div class="sect2" title="Default Software Timings"><div class="titlepage"><div><div><h3 class="title"><a name="software%20timings"></a>Default Software Timings</h3></div></div></div><div class="table"><a name="id2986751"></a><p class="title"><b>Table 1. Timings</b></p><div class="table-contents"><table summary="Timings" border="1"><colgroup><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">fuelcell</th><th align="left">short circuit interval</th><th align="left">short circuit time</th><th align="left">purge interval</th><th align="left">purge time</th></tr></thead><tbody><tr><td align="left">1.5W</td><td align="left">10s</td><td align="left">100ms</td><td align="left">60s</td><td align="left">100ms</td></tr><tr><td align="left">3W</td><td align="left">10s</td><td align="left">100ms</td><td align="left">60s</td><td align="left">100ms</td></tr></tbody></table></div></div><br class="table-break"></div><div class="sect2" title="Shield Pins"><div class="titlepage"><div><div><h3 class="title"><a name="shieldpins"></a>Shield Pins</h3></div></div></div><p>You should avoid using these pins in your application</p><div class="table"><a name="id2986867"></a><p class="title"><b>Table 2. Hardware v1.2 pin allocation</b></p><div class="table-contents"><table summary="Hardware v1.2 pin allocation" border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Pin</th><th align="left">Function</th></tr></thead><tbody><tr><td align="left">3</td><td align="left">purge</td></tr><tr><td align="left">4</td><td align="left">disconnect load</td></tr><tr><td align="left">5</td><td align="left">short circuit</td></tr><tr><td align="left">6</td><td align="left">status LED</td></tr><tr><td align="left">A1</td><td align="left">stack voltage sense</td></tr><tr><td align="left">A2</td><td align="left">stack current sense</td></tr><tr><td align="left">A3</td><td align="left">capacitor voltage sense</td></tr><tr><td align="left">AREF</td><td align="left">connected to Arduino's 3.3v pin</td></tr></tbody></table></div></div><br class="table-break"></div><div class="sect1" title="Storage"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="storage"></a>Storage</h2></div></div></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3>The fuel cell stacks will degrade if they are allowed to dry out.
Therefore whenever the fuel cell stack is not be used for more than one hour, it should be stored in the sealed airtight bag.
</div></div><div class="sect1" title="Reconditioning"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="reconditioning"></a>Reconditioning</h2></div></div></div><p>If the fuel cell is not used for several days or is not working at the rated power, it can be reconditioned as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Remove the purge valve from the stack and disconnect the wires from the Stack Control Shield</li><li class="listitem">Fill the syringe with distilled water and connect the syringe to the hydrogen inlet of the stack using a short length of silicone tubing.</li><li class="listitem">Inject distilled water into the stack until it comes out of the fuel cell from the other nozzle</li><li class="listitem">Disconnect the syringe from the silicone tube and connect a Hydrostik using a tube with plastic clip to the hydrogen inlet of the stack</li><li class="listitem">Open the plastic clip to allow hydrogen to flow into the stack. You will see the remaining water from inside the stack flow out of the stack</li><li class="listitem">When no more water comes out (after about 5-10 seconds), the stack has been rehydrated and emptied and is now ready for the short-circuit procedure which reconditions the fuel cell membrane</li><li class="listitem">Take the red and black wires of the stack and hold the exposed ends together, thus short-circuiting the stack for 20 seconds</li><li class="listitem">Then open the short-circuit (stop touching the wires together) and close the hydrogen supply clip on the inlet tube</li><li class="listitem">Your stack is now reconditioned and ready for use</li></ol></div></div><div class="sect1" title="Hydrogen supply"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="supply"></a>Hydrogen supply</h2></div></div></div><p>
Where delivery method permits, your H2MDK will be supplied with pre-filled HydroSTIK. 
To refill your HydroSTIK we recommend that you purchase a Horizon Fuel Cell HydroFILL home electrolyser which generates hydrogen from electricity and distilled water. HydroFILL can run on mains electricity or on DC. 
For more information see the <a class="ulink" href="http://www.horizonfuelcell.com/hydrogen_solutions.htm" target="_top">Horizon fuel cell website</a>.</p></div><div class="sect1" title="Safety"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="safety"></a>Safety</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">WARNING: Fire Hazard</li><li class="listitem">This is not a toy, keep away from children</li><li class="listitem">Read and Understand Operating instructions before use</li><li class="listitem">HydroSTIK contain flammable gas under pressure (most of the hydrogen is adsorbed by the metal hydride matrix but the voids are filled with gas at circa 20bar)</li><li class="listitem">Do not tamper with HydroSTIK. Under no circumstance should a cartridge be disassembled. Exposure to air will render the hydride material useless. Materials within the hydride are potentially dangerous.</li><li class="listitem">When using this kit, basic safety precautions should always be followed to reduce risk of fire, electric shock or personal injury</li><li class="listitem">Do not disassemble the fuel cell stack, damage will result and your warranty will be void. Stack membrane materials may be hazardous to health</li><li class="listitem">Keep away from alkaline and acidic environments</li><li class="listitem">This kit is supplied as a test and development tool. Do not use it to power safety critical appliances</li></ul></div></div><div class="sect1" title="FAQ"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faq"></a>FAQ</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    I get less power than I expect, why? Things to check include:
        <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">getting enough hydrogen, perhaps you need an extra hydrostik</li><li class="listitem">the fuelcell may not be getting enough oxygen, check the vents are clear</li><li class="listitem">remember the Arduino will draw about 0.25W, so for the lower power systems this can be a sizable percentage of available output power</li></ul></div></li><li class="listitem">
    Is there a way to manually adjust output voltage or current for a given application? No, the 1.5/3W system provides a 5v regulated output. The 12/30W system provides the output given by the stack itself. As more power is drawn voltage will decrease.
    </li><li class="listitem">
    What do the voltage and current readings mean? The voltage is the stack voltage. On the 1.5W system this should be around 1.5V. The 3W system will show around 3V. the 12W system will show around 12V and the 30W system will show around 14V. The current is the total current drawn from the stack.
    </li><li class="listitem">
    Why is the software readout of current/voltage inaccurate? The voltage readout should be fairly accurate (to about 50mV). The current reading may be out by up to 100mA.Additionaly, the software is doing some filtering on the current measurement which is why it can take some time for the current shown to match what is being measured. 
    </li><li class="listitem">
      Where can I find a voltage/current curve for the fuel cell? Check the <a class="link" href="#poweroutput" title="Power output &amp; conditioning">Power output</a> section of the manual.
    </li><li class="listitem">
      What pins does the shield use? See the <a class="link" href="#shieldpins" title="Shield Pins">Shield Pins</a> section of the manual.
    </li><li class="listitem">
    What is the software actually doing? The software runs the timing of shorting the stack and purging the stack. These are necessary to keep the stack working. The software also monitors the stack voltage and the total drawn current.
    </li><li class="listitem">
    How often do I need to call the poll function? The polling function should be called at least every 100ms, but the timing isn't overly important. 
    </li><li class="listitem">
    How do I get started writing my own application? Start with one of the h2mdk examples (that come with the library). Avoid using the pins mentioned in <a class="link" href="#shieldpins" title="Shield Pins">Shield Pins</a>. Ensure that you start the fuelcell with the start() function, and keep the stack working by regularly calling the poll() function.
    </li></ol></div></div><div class="sect1" title="Support"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="support"></a>Support</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Download <a class="ulink" href="http://www.arcolaenergy.com/h2mdk" target="_top">code and latest technical information</a></li><li class="listitem">Check the latest <a class="ulink" href="http://www.horizonfuelcell.com/h2mdk.htm" target="_top">H2MDK product page</a> at Horizon Fuel Cell</li><li class="listitem"><a class="ulink" href="http://arcolaenergy.com/forum/" target="_top">Forum</a> for inventor kit users</li><li class="listitem">Other questions can be directed to <a class="ulink" href="mailto:support@arcolaenergy.com" target="_top">support@arcolaenergy.com</a></li></ul></div></div><div class="sect1" title="License"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="license"></a>License</h2></div></div></div><p>
This documentation, the hardware and the software are all released under the <a class="ulink" href="http://www.gnu.org/licenses/gpl-3.0-standalone.html" target="_top">GPL v3 license</a></p></div></div></body></html>
